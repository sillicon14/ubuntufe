{"ast":null,"code":"import Axios from \"axios\";\nimport Cookie from \"js-cookie\";\nimport us from \"../userStore\"; // It is used to set and get userId and CartId\n\nimport { USER_REGISTER_FAIL, USER_REGISTER_REQUEST, USER_REGISTER_SUCCESS, USER_SIGNIN_FAIL, USER_SIGNIN_REQUEST, USER_SIGNIN_SUCCESS } from \"../constants/userConstants\";\n\nconst signin = (email, password) => async dispatch => {\n  dispatch({\n    type: USER_SIGNIN_REQUEST,\n    payload: {\n      email,\n      password\n    }\n  });\n\n  try {\n    const {\n      data\n    } = await Axios.post(\"/api/users/signin\", {\n      email,\n      password\n    });\n    console.log(\"Inside sign-in\", data, \"isAdmin\", data.isAdmin);\n    us.setUserId(data._id);\n    us.setAdmin(data.isAdmin); //us.setCartId(data.cartId);\n    //dispatch(createCart(data._id));\n\n    dispatch({\n      type: USER_SIGNIN_SUCCESS,\n      payload: data\n    });\n    Cookie.set(\"userInfo\", JSON.stringify(data)); //token\n\n    /*var csrftokenCookie = Cookie.get('token');\r\n        console.log(\"csrftokenCookie\",csrftokenCookie);\r\n        console.log(\"token\",document.cookie);*/\n  } catch (error) {\n    //console error\n    if (error.response && error.response.data) {\n      var signMes = error.response.data.state;\n      us.setsignMes(signMes);\n      console.log(signMes);\n    }\n\n    dispatch({\n      type: USER_SIGNIN_FAIL,\n      payload: error.message\n    });\n  }\n};\n\nconst register = (name, email, password, Vpassword, isAdmin) => async dispatch => {\n  dispatch({\n    type: USER_REGISTER_REQUEST,\n    payload: {\n      name,\n      email,\n      password,\n      Vpassword,\n      isAdmin\n    }\n  });\n\n  try {\n    const {\n      data\n    } = await Axios.post(\"/api/users/register\", {\n      name,\n      email,\n      password,\n      Vpassword,\n      isAdmin\n    });\n    console.log(\"Inside register \", data);\n    us.setUserId(data._id);\n    var regMes = \"Check mail for verification!!\";\n    us.setregMes(regMes);\n    var regMes1 = \"\"; //createCart(data._id);\n    //dispatch(createCart(data._id));\n\n    setTimeout(() => {\n      us.setregMes(regMes1);\n    }, 3000);\n    dispatch({\n      type: USER_REGISTER_SUCCESS,\n      payload: data\n    });\n    Cookie.set(\"userInfo\", JSON.stringify(data));\n  } catch (error) {\n    //console error\n    if (error.response && error.response.data) {\n      var regMes2 = error.response.data.state; //setTimeout(function(){ x.className = x.className.replace(\"show\", \"\"); }, 2000);\n      //setTimeout(function(){  us.setregMes(regMes); }, 5000);\n\n      us.setregMes(regMes2);\n      console.log(regMes2);\n    }\n\n    dispatch({\n      type: USER_REGISTER_FAIL,\n      payload: error.message\n    });\n  }\n};\n/*\r\nconst updateUser = (id,cartId) => async  (dispatch) => {\r\n    dispatch({type: USER_UPDATE_REQUEST, payload: {id,cartId}});\r\n    try{\r\n        const {data} = await Axios.put(`/api/users/${id}`,{cartId});\r\n       \r\n        dispatch({ type:USER_UPDATE_SUCCESS, payload:data});\r\n        Cookie.set('userInfo',JSON.stringify(data));\r\n    }\r\n    catch(error){\r\n        dispatch({ type:USER_UPDATE_FAIL, payload:error.message});\r\n    }\r\n}\r\n*/\n\n\nexport { signin, register };","map":{"version":3,"sources":["C:/Users/rohit/Desktop/intern/Sushmita - Final3/frontend/src/actions/userActions.js"],"names":["Axios","Cookie","us","USER_REGISTER_FAIL","USER_REGISTER_REQUEST","USER_REGISTER_SUCCESS","USER_SIGNIN_FAIL","USER_SIGNIN_REQUEST","USER_SIGNIN_SUCCESS","signin","email","password","dispatch","type","payload","data","post","console","log","isAdmin","setUserId","_id","setAdmin","set","JSON","stringify","error","response","signMes","state","setsignMes","message","register","name","Vpassword","regMes","setregMes","regMes1","setTimeout","regMes2"],"mappings":"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","sourcesContent":["import Axios from \"axios\";\r\nimport Cookie from \"js-cookie\";\r\nimport us from \"../userStore\"; // It is used to set and get userId and CartId\r\nimport {\r\n  USER_REGISTER_FAIL,\r\n  USER_REGISTER_REQUEST,\r\n  USER_REGISTER_SUCCESS,\r\n  USER_SIGNIN_FAIL,\r\n  USER_SIGNIN_REQUEST,\r\n  USER_SIGNIN_SUCCESS,\r\n} from \"../constants/userConstants\";\r\n\r\nconst signin = (email, password) => async (dispatch) => {\r\n  dispatch({ type: USER_SIGNIN_REQUEST, payload: { email, password } });\r\n  try {\r\n    const { data } = await Axios.post(\"/api/users/signin\", { email, password });\r\n    console.log(\"Inside sign-in\", data, \"isAdmin\", data.isAdmin);\r\n    us.setUserId(data._id);\r\n    us.setAdmin(data.isAdmin);\r\n    //us.setCartId(data.cartId);\r\n    //dispatch(createCart(data._id));\r\n    dispatch({ type: USER_SIGNIN_SUCCESS, payload: data });\r\n    Cookie.set(\"userInfo\", JSON.stringify(data));\r\n\r\n    //token\r\n    /*var csrftokenCookie = Cookie.get('token');\r\n        console.log(\"csrftokenCookie\",csrftokenCookie);\r\n        console.log(\"token\",document.cookie);*/\r\n  } catch (error) {\r\n    //console error\r\n    if (error.response && error.response.data) {\r\n      var signMes = error.response.data.state;\r\n      us.setsignMes(signMes);\r\n      console.log(signMes);\r\n    }\r\n    dispatch({ type: USER_SIGNIN_FAIL, payload: error.message });\r\n  }\r\n};\r\n\r\nconst register =\r\n  (name, email, password, Vpassword, isAdmin) => async (dispatch) => {\r\n    dispatch({\r\n      type: USER_REGISTER_REQUEST,\r\n      payload: { name, email, password, Vpassword, isAdmin },\r\n    });\r\n    try {\r\n      const { data } = await Axios.post(\"/api/users/register\", {\r\n        name,\r\n        email,\r\n        password,\r\n        Vpassword,\r\n        isAdmin,\r\n      });\r\n      console.log(\"Inside register \", data);\r\n      us.setUserId(data._id);\r\n      var regMes = \"Check mail for verification!!\";\r\n      us.setregMes(regMes);\r\n      var regMes1 = \"\";\r\n      //createCart(data._id);\r\n      //dispatch(createCart(data._id));\r\n      setTimeout(() => {\r\n        us.setregMes(regMes1);\r\n      }, 3000);\r\n\r\n      dispatch({ type: USER_REGISTER_SUCCESS, payload: data });\r\n\r\n      Cookie.set(\"userInfo\", JSON.stringify(data));\r\n    } catch (error) {\r\n      //console error\r\n      if (error.response && error.response.data) {\r\n        var regMes2 = error.response.data.state;\r\n        //setTimeout(function(){ x.className = x.className.replace(\"show\", \"\"); }, 2000);\r\n        //setTimeout(function(){  us.setregMes(regMes); }, 5000);\r\n        us.setregMes(regMes2);\r\n\r\n        console.log(regMes2);\r\n      }\r\n      dispatch({ type: USER_REGISTER_FAIL, payload: error.message });\r\n    }\r\n  };\r\n\r\n/*\r\nconst updateUser = (id,cartId) => async  (dispatch) => {\r\n    dispatch({type: USER_UPDATE_REQUEST, payload: {id,cartId}});\r\n    try{\r\n        const {data} = await Axios.put(`/api/users/${id}`,{cartId});\r\n       \r\n        dispatch({ type:USER_UPDATE_SUCCESS, payload:data});\r\n        Cookie.set('userInfo',JSON.stringify(data));\r\n    }\r\n    catch(error){\r\n        dispatch({ type:USER_UPDATE_FAIL, payload:error.message});\r\n    }\r\n}\r\n*/\r\n\r\nexport { signin, register };\r\n"]},"metadata":{},"sourceType":"module"}